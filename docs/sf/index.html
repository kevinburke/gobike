<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link " href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/berkeley/">Berkeley</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/emeryville/">Emeryville</span></a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 33889
          <div id="placeholder" class="chart">
          </div>
        </div>
        <div class="col-md-4">
          <h4>Most Popular Stations</h4>
          <ul>
            <li>San Francisco Ferry Building (Harry Bridges Plaza) (1203)</li>
            <li>San Francisco Caltrain Station 2  (Townsend St at 4th St) (1121)</li>
            <li>San Francisco Caltrain (Townsend St at 4th St) (1062)</li>
            <li>The Embarcadero at Sansome St (1012)</li>
            <li>Montgomery St BART Station (Market St at 2nd St) (967)</li>
            <li>Berry St at 4th St (910)</li>
            <li>Steuart St at Market St (904)</li>
            <li>Market St at 10th St (897)</li>
            <li>Powell St BART Station (Market St at 4th St) (817)</li>
            <li>Howard St at Beale St (779)</li>
            </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 132
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 1281
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 26.5
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1498374000000,3164],[1498978800000,5846],[1499583600000,8264],[1500188400000,9966],[1500793200000,10325],[1501398000000,11638],[1502002800000,13220],[1502607600000,15201],[1503212400000,15936],[1503817200000,16852],[1504422000000,17531],[1505026800000,18121],[1505631600000,19291],[1506236400000,19057],[1506841200000,20341],[1507446000000,18085],[1508050800000,19026],[1508655600000,21041],[1509260400000,18926],[1509865200000,19944],[1510473600000,16803],[1511078400000,12845],[1511683200000,18160],[1512288000000,19367],[1512892800000,19379],[1513497600000,14660],[1514102400000,7245],[1514707200000,12526],[1515312000000,14878],[1515916800000,16370],[1516521600000,17809],[1517126400000,21125],[1517731200000,22498],[1518336000000,20755],[1518940800000,16522],[1519545600000,15539],[1520150400000,19970],[1520755200000,16204],[1521356400000,17366],[1521961200000,22555],[1522566000000,18613],[1523170800000,21678],[1523775600000,20712],[1524380400000,26665],[1524985200000,29582],[1525590000000,30952],[1526194800000,29938],[1526799600000,29738],[1527404400000,29575],[1528009200000,33061],[1528614000000,33519],[1529218800000,33525],[1529823600000,35219],[1530428400000,27038],[1531033200000,34868],[1531638000000,34296],[1532242800000,33889]];
      var stationsPerWeek = [[1498374000000,41],[1498978800000,41],[1499583600000,49],[1500188400000,59],[1500793200000,65],[1501398000000,80],[1502002800000,97],[1502607600000,111],[1503212400000,110],[1503817200000,113],[1504422000000,114],[1505026800000,114],[1505631600000,115],[1506236400000,118],[1506841200000,118],[1507446000000,120],[1508050800000,120],[1508655600000,121],[1509260400000,121],[1509865200000,121],[1510473600000,121],[1511078400000,120],[1511683200000,120],[1512288000000,120],[1512892800000,120],[1513497600000,120],[1514102400000,120],[1514707200000,120],[1515312000000,119],[1515916800000,119],[1516521600000,120],[1517126400000,120],[1517731200000,120],[1518336000000,120],[1518940800000,120],[1519545600000,120],[1520150400000,122],[1520755200000,122],[1521356400000,122],[1521961200000,122],[1522566000000,122],[1523170800000,124],[1523775600000,124],[1524380400000,124],[1524985200000,124],[1525590000000,125],[1526194800000,125],[1526799600000,125],[1527404400000,124],[1528009200000,126],[1528614000000,129],[1529218800000,129],[1529823600000,131],[1530428400000,131],[1531033200000,131],[1531638000000,132],[1532242800000,132]];
      var bikesPerWeek = [[1498374000000,538],[1498978800000,546],[1499583600000,569],[1500188400000,777],[1500793200000,843],[1501398000000,986],[1502002800000,1071],[1502607600000,1107],[1503212400000,1096],[1503817200000,1150],[1504422000000,1178],[1505026800000,1336],[1505631600000,1366],[1506236400000,1346],[1506841200000,1327],[1507446000000,1336],[1508050800000,1304],[1508655600000,1302],[1509260400000,1274],[1509865200000,1330],[1510473600000,1315],[1511078400000,1289],[1511683200000,1371],[1512288000000,1401],[1512892800000,1408],[1513497600000,1401],[1514102400000,1332],[1514707200000,1434],[1515312000000,1449],[1515916800000,1471],[1516521600000,1482],[1517126400000,1500],[1517731200000,1506],[1518336000000,1488],[1518940800000,1466],[1519545600000,1460],[1520150400000,1462],[1520755200000,1456],[1521356400000,1453],[1521961200000,1480],[1522566000000,1452],[1523170800000,1450],[1523775600000,1416],[1524380400000,1637],[1524985200000,1650],[1525590000000,1578],[1526194800000,1554],[1526799600000,1540],[1527404400000,1486],[1528009200000,1462],[1528614000000,1471],[1529218800000,1449],[1529823600000,1355],[1530428400000,1349],[1531033200000,1342],[1531638000000,1321],[1532242800000,1281]];
      var tripsPerBikePerWeek = [[1498374000000,5.881040892193308],[1498978800000,10.706959706959706],[1499583600000,14.523725834797892],[1500188400000,12.826254826254827],[1500793200000,12.247924080664294],[1501398000000,11.803245436105477],[1502002800000,12.343604108309991],[1502607600000,13.731707317073171],[1503212400000,14.540145985401459],[1503817200000,14.65391304347826],[1504422000000,14.88200339558574],[1505026800000,13.563622754491018],[1505631600000,14.122254758418741],[1506236400000,14.158246656760772],[1506841200000,15.328560663149963],[1507446000000,13.536676646706587],[1508050800000,14.590490797546012],[1508655600000,16.1605222734255],[1509260400000,14.85557299843014],[1509865200000,14.995488721804511],[1510473600000,12.777946768060836],[1511078400000,9.965089216446858],[1511683200000,13.24580598103574],[1512288000000,13.823697359029264],[1512892800000,13.763494318181818],[1513497600000,10.46395431834404],[1514102400000,5.4391891891891895],[1514707200000,8.735006973500697],[1515312000000,10.267770876466528],[1515916800000,11.128484024473147],[1516521600000,12.016869095816464],[1517126400000,14.083333333333334],[1517731200000,14.938911022576361],[1518336000000,13.948252688172044],[1518940800000,11.27012278308322],[1519545600000,10.643150684931507],[1520150400000,13.659370725034199],[1520755200000,11.12912087912088],[1521356400000,11.9518238128011],[1521961200000,15.239864864864865],[1522566000000,12.818870523415978],[1523170800000,14.950344827586207],[1523775600000,14.627118644067796],[1524380400000,16.288943188759927],[1524985200000,17.92848484848485],[1525590000000,19.61470215462611],[1526194800000,19.265122265122265],[1526799600000,19.31038961038961],[1527404400000,19.90242261103634],[1528009200000,22.613543091655266],[1528614000000,22.786539768864717],[1529218800000,23.13664596273292],[1529823600000,25.99188191881919],[1530428400000,20.04299481097109],[1531033200000,25.982116244411326],[1531638000000,25.96214988644966],[1532242800000,26.45511319281811]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);

      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
