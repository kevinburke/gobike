<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link " href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 6323
          <div id="placeholder" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 80
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 964
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 6.6
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1499583600000,809],[1500188400000,1312],[1500793200000,1969],[1501398000000,2722],[1502002800000,2686],[1502607600000,2707],[1503212400000,2937],[1503817200000,2821],[1504422000000,2986],[1505026800000,3327],[1505631600000,3447],[1506236400000,3603],[1506841200000,3661],[1507446000000,3230],[1508050800000,3434],[1508655600000,3751],[1509260400000,3356],[1509865200000,3458],[1510473600000,3084],[1511078400000,2555],[1511683200000,3189],[1512288000000,3517],[1512892800000,3339],[1513497600000,2819],[1514102400000,1656],[1514707200000,2363],[1515312000000,2798],[1515916800000,3305],[1516521600000,3317],[1517126400000,3919],[1517731200000,4111],[1518336000000,3917],[1518940800000,3167],[1519545600000,3055],[1520150400000,3756],[1520755200000,3198],[1521356400000,3433],[1521961200000,4588],[1522566000000,3875],[1523170800000,4630],[1523775600000,4419],[1524380400000,4732],[1524985200000,5098],[1525590000000,5762],[1526194800000,6013],[1526799600000,5581],[1527404400000,5953],[1528009200000,6410],[1528614000000,6512],[1529218800000,6255],[1529823600000,6537],[1530428400000,5426],[1531033200000,6473],[1531638000000,6648],[1532242800000,6323]];
      var stationsPerWeek = [[1499583600000,35],[1500188400000,40],[1500793200000,51],[1501398000000,54],[1502002800000,55],[1502607600000,57],[1503212400000,55],[1503817200000,57],[1504422000000,61],[1505026800000,65],[1505631600000,66],[1506236400000,67],[1506841200000,68],[1507446000000,66],[1508050800000,68],[1508655600000,69],[1509260400000,66],[1509865200000,67],[1510473600000,67],[1511078400000,69],[1511683200000,68],[1512288000000,67],[1512892800000,70],[1513497600000,72],[1514102400000,71],[1514707200000,73],[1515312000000,74],[1515916800000,75],[1516521600000,75],[1517126400000,76],[1517731200000,76],[1518336000000,76],[1518940800000,75],[1519545600000,76],[1520150400000,76],[1520755200000,77],[1521356400000,78],[1521961200000,80],[1522566000000,79],[1523170800000,80],[1523775600000,80],[1524380400000,80],[1524985200000,80],[1525590000000,80],[1526194800000,79],[1526799600000,80],[1527404400000,80],[1528009200000,80],[1528614000000,80],[1529218800000,80],[1529823600000,80],[1530428400000,79],[1531033200000,80],[1531638000000,80],[1532242800000,80]];
      var bikesPerWeek = [[1499583600000,322],[1500188400000,440],[1500793200000,481],[1501398000000,616],[1502002800000,609],[1502607600000,613],[1503212400000,648],[1503817200000,678],[1504422000000,701],[1505026800000,708],[1505631600000,696],[1506236400000,709],[1506841200000,702],[1507446000000,652],[1508050800000,667],[1508655600000,683],[1509260400000,628],[1509865200000,596],[1510473600000,582],[1511078400000,597],[1511683200000,657],[1512288000000,726],[1512892800000,743],[1513497600000,715],[1514102400000,583],[1514707200000,671],[1515312000000,720],[1515916800000,791],[1516521600000,774],[1517126400000,837],[1517731200000,832],[1518336000000,856],[1518940800000,782],[1519545600000,746],[1520150400000,852],[1520755200000,780],[1521356400000,799],[1521961200000,914],[1522566000000,836],[1523170800000,886],[1523775600000,846],[1524380400000,855],[1524985200000,908],[1525590000000,954],[1526194800000,933],[1526799600000,916],[1527404400000,925],[1528009200000,957],[1528614000000,984],[1529218800000,966],[1529823600000,984],[1530428400000,932],[1531033200000,975],[1531638000000,978],[1532242800000,964]];
      var tripsPerBikePerWeek = [[1499583600000,2.512422360248447],[1500188400000,2.981818181818182],[1500793200000,4.093555093555094],[1501398000000,4.4188311688311686],[1502002800000,4.4105090311986865],[1502607600000,4.415986949429038],[1503212400000,4.532407407407407],[1503817200000,4.160766961651918],[1504422000000,4.25962910128388],[1505026800000,4.6991525423728815],[1505631600000,4.952586206896552],[1506236400000,5.081805359661495],[1506841200000,5.215099715099715],[1507446000000,4.95398773006135],[1508050800000,5.148425787106447],[1508655600000,5.491947291361639],[1509260400000,5.343949044585988],[1509865200000,5.802013422818792],[1510473600000,5.298969072164948],[1511078400000,4.279731993299833],[1511683200000,4.853881278538813],[1512288000000,4.84435261707989],[1512892800000,4.4939434724091525],[1513497600000,3.9426573426573426],[1514102400000,2.840480274442539],[1514707200000,3.5216095380029806],[1515312000000,3.886111111111111],[1515916800000,4.178255372945639],[1516521600000,4.285529715762274],[1517126400000,4.682198327359617],[1517731200000,4.941105769230769],[1518336000000,4.575934579439252],[1518940800000,4.049872122762149],[1519545600000,4.095174262734584],[1520150400000,4.408450704225352],[1520755200000,4.1],[1521356400000,4.296620775969963],[1521961200000,5.019693654266958],[1522566000000,4.635167464114833],[1523170800000,5.225733634311513],[1523775600000,5.223404255319149],[1524380400000,5.534502923976608],[1524985200000,5.61453744493392],[1525590000000,6.039832285115304],[1526194800000,6.444801714898178],[1526799600000,6.092794759825328],[1527404400000,6.435675675675676],[1528009200000,6.698014629049112],[1528614000000,6.617886178861789],[1529218800000,6.475155279503106],[1529823600000,6.6432926829268295],[1530428400000,5.8218884120171674],[1531033200000,6.638974358974359],[1531638000000,6.7975460122699385],[1532242800000,6.559128630705394]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);
      
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
