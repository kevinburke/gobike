<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>

    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a class="navbar-brand" href="#">GoBike</a>
      <div class="navbar-expand">
        <ul class="navbar-nav">
          <li class="nav-item ">
            <a class="nav-link" href="/">Bay Area</span></a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/oakland/">Oakland</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="/sf/">San Francisco</a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="/sj/">San Jose</a>
          </li>
        </ul>
      </div>
    </nav>

    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          Trips per week: 13539
          <div id="placeholder" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 176
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 1742
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 7.8
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1499583600000,983],[1500188400000,1958],[1500793200000,2838],[1501398000000,3664],[1502002800000,3880],[1502607600000,3731],[1503212400000,4208],[1503817200000,4299],[1504422000000,4533],[1505026800000,5020],[1505631600000,5594],[1506236400000,5470],[1506841200000,5691],[1507446000000,4935],[1508050800000,5248],[1508655600000,5949],[1509260400000,5527],[1509865200000,5550],[1510473600000,5132],[1511078400000,4535],[1511683200000,5551],[1512288000000,6046],[1512892800000,5753],[1513497600000,4598],[1514102400000,2803],[1514707200000,3889],[1515312000000,4565],[1515916800000,5535],[1516521600000,5772],[1517126400000,7247],[1517731200000,7841],[1518336000000,7635],[1518940800000,6118],[1519545600000,5893],[1520150400000,7652],[1520755200000,6343],[1521356400000,6983],[1521961200000,8163],[1522566000000,8042],[1523170800000,9287],[1523775600000,8656],[1524380400000,9408],[1524985200000,10026],[1525590000000,11088],[1526194800000,10773],[1526799600000,10088],[1527404400000,11015],[1528009200000,12135],[1528614000000,12304],[1529218800000,12911],[1529823600000,13303],[1530428400000,11835],[1531033200000,13536],[1531638000000,13730],[1532242800000,13539]];
      var stationsPerWeek = [[1499583600000,45],[1500188400000,71],[1500793200000,85],[1501398000000,92],[1502002800000,94],[1502607600000,96],[1503212400000,94],[1503817200000,101],[1504422000000,105],[1505026800000,112],[1505631600000,118],[1506236400000,120],[1506841200000,122],[1507446000000,122],[1508050800000,126],[1508655600000,129],[1509260400000,126],[1509865200000,130],[1510473600000,133],[1511078400000,137],[1511683200000,136],[1512288000000,138],[1512892800000,142],[1513497600000,148],[1514102400000,150],[1514707200000,150],[1515312000000,153],[1515916800000,154],[1516521600000,153],[1517126400000,155],[1517731200000,158],[1518336000000,157],[1518940800000,157],[1519545600000,159],[1520150400000,161],[1520755200000,165],[1521356400000,167],[1521961200000,168],[1522566000000,169],[1523170800000,170],[1523775600000,170],[1524380400000,170],[1524985200000,170],[1525590000000,169],[1526194800000,168],[1526799600000,169],[1527404400000,172],[1528009200000,172],[1528614000000,172],[1529218800000,174],[1529823600000,174],[1530428400000,173],[1531033200000,175],[1531638000000,175],[1532242800000,176]];
      var bikesPerWeek = [[1499583600000,380],[1500188400000,645],[1500793200000,705],[1501398000000,855],[1502002800000,968],[1502607600000,964],[1503212400000,1041],[1503817200000,1124],[1504422000000,1190],[1505026800000,1190],[1505631600000,1228],[1506236400000,1243],[1506841200000,1260],[1507446000000,1130],[1508050800000,1157],[1508655600000,1264],[1509260400000,1203],[1509865200000,1137],[1510473600000,1087],[1511078400000,1098],[1511683200000,1215],[1512288000000,1318],[1512892800000,1357],[1513497600000,1306],[1514102400000,1058],[1514707200000,1245],[1515312000000,1292],[1515916800000,1403],[1516521600000,1407],[1517126400000,1536],[1517731200000,1558],[1518336000000,1566],[1518940800000,1444],[1519545600000,1434],[1520150400000,1554],[1520755200000,1511],[1521356400000,1532],[1521961200000,1647],[1522566000000,1584],[1523170800000,1664],[1523775600000,1580],[1524380400000,1662],[1524985200000,1759],[1525590000000,1775],[1526194800000,1698],[1526799600000,1650],[1527404400000,1732],[1528009200000,1740],[1528614000000,1834],[1529218800000,1850],[1529823600000,1874],[1530428400000,1744],[1531033200000,1775],[1531638000000,1795],[1532242800000,1742]];
      var tripsPerBikePerWeek = [[1499583600000,2.586842105263158],[1500188400000,3.0356589147286823],[1500793200000,4.025531914893617],[1501398000000,4.285380116959065],[1502002800000,4.008264462809917],[1502607600000,3.870331950207469],[1503212400000,4.042267050912584],[1503817200000,3.824733096085409],[1504422000000,3.8092436974789914],[1505026800000,4.218487394957983],[1505631600000,4.555374592833876],[1506236400000,4.400643604183427],[1506841200000,4.516666666666667],[1507446000000,4.367256637168142],[1508050800000,4.535868625756266],[1508655600000,4.706487341772152],[1509260400000,4.594347464671654],[1509865200000,4.881266490765172],[1510473600000,4.721251149954002],[1511078400000,4.13023679417122],[1511683200000,4.568724279835391],[1512288000000,4.587253414264036],[1512892800000,4.239498894620486],[1513497600000,3.5206738131699846],[1514102400000,2.649338374291115],[1514707200000,3.123694779116466],[1515312000000,3.53328173374613],[1515916800000,3.9451176051318604],[1516521600000,4.1023454157782515],[1517126400000,4.718098958333333],[1517731200000,5.032734274711168],[1518336000000,4.875478927203065],[1518940800000,4.2368421052631575],[1519545600000,4.109483960948396],[1520150400000,4.924066924066924],[1520755200000,4.197882197220384],[1521356400000,4.558093994778068],[1521961200000,4.956284153005464],[1522566000000,5.077020202020202],[1523170800000,5.5811298076923075],[1523775600000,5.478481012658228],[1524380400000,5.6606498194945845],[1524985200000,5.699829448550313],[1525590000000,6.246760563380282],[1526194800000,6.34452296819788],[1526799600000,6.113939393939394],[1527404400000,6.359699769053118],[1528009200000,6.974137931034483],[1528614000000,6.708833151581243],[1529218800000,6.978918918918919],[1529823600000,7.09871931696905],[1530428400000,6.786123853211009],[1531033200000,7.625915492957747],[1531638000000,7.649025069637883],[1532242800000,7.772101033295063]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);
      
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
