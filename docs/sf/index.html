<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link " href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/berkeley/">Berkeley</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/emeryville/">Emeryville</span></a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 34140
          <div id="placeholder" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 206
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 2388
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 14.3
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1498374000000,2562],[1498978800000,4865],[1499583600000,7262],[1500188400000,9411],[1500793200000,10574],[1501398000000,12441],[1502002800000,13996],[1502607600000,15646],[1503212400000,16393],[1503817200000,16938],[1504422000000,17677],[1505026800000,18413],[1505631600000,19923],[1506236400000,19546],[1506841200000,20804],[1507446000000,18337],[1508050800000,19148],[1508655600000,21217],[1509260400000,19052],[1509865200000,19971],[1510473600000,17159],[1511078400000,13813],[1511683200000,18482],[1512288000000,19917],[1512892800000,19695],[1513497600000,15228],[1514102400000,8196],[1514707200000,12816],[1515312000000,14939],[1515916800000,16780],[1516521600000,18061],[1517126400000,21716],[1517731200000,23177],[1518336000000,21622],[1518940800000,17304],[1519545600000,16346],[1520150400000,21208],[1520755200000,17349],[1521356400000,18706],[1521961200000,23757],[1522566000000,20299],[1523170800000,23225],[1523775600000,21947],[1524380400000,27195],[1524985200000,30082],[1525590000000,31970],[1526194800000,31159],[1526799600000,30481],[1527404400000,30603],[1528009200000,33581],[1528614000000,33593],[1529218800000,33909],[1529823600000,35251],[1530428400000,28356],[1531033200000,34817],[1531638000000,34314],[1532242800000,34140]];
      var stationsPerWeek = [[1498374000000,36],[1498978800000,36],[1499583600000,63],[1500188400000,94],[1500793200000,114],[1501398000000,132],[1502002800000,149],[1502607600000,160],[1503212400000,157],[1503817200000,162],[1504422000000,164],[1505026800000,169],[1505631600000,176],[1506236400000,181],[1506841200000,181],[1507446000000,179],[1508050800000,181],[1508655600000,183],[1509260400000,180],[1509865200000,182],[1510473600000,182],[1511078400000,184],[1511683200000,183],[1512288000000,183],[1512892800000,185],[1513497600000,190],[1514102400000,190],[1514707200000,190],[1515312000000,191],[1515916800000,192],[1516521600000,192],[1517126400000,194],[1517731200000,195],[1518336000000,194],[1518940800000,193],[1519545600000,195],[1520150400000,198],[1520755200000,199],[1521356400000,201],[1521961200000,199],[1522566000000,200],[1523170800000,201],[1523775600000,199],[1524380400000,199],[1524985200000,199],[1525590000000,199],[1526194800000,198],[1526799600000,199],[1527404400000,202],[1528009200000,202],[1528614000000,204],[1529218800000,204],[1529823600000,204],[1530428400000,203],[1531033200000,205],[1531638000000,205],[1532242800000,206]];
      var bikesPerWeek = [[1498374000000,535],[1498978800000,543],[1499583600000,803],[1500188400000,1249],[1500793200000,1396],[1501398000000,1665],[1502002800000,1749],[1502607600000,1747],[1503212400000,1773],[1503817200000,1860],[1504422000000,1876],[1505026800000,2057],[1505631600000,2140],[1506236400000,2117],[1506841200000,2131],[1507446000000,2039],[1508050800000,2025],[1508655600000,2068],[1509260400000,2013],[1509865200000,1985],[1510473600000,1981],[1511078400000,1915],[1511683200000,2080],[1512288000000,2124],[1512892800000,2191],[1513497600000,2158],[1514102400000,1933],[1514707200000,2115],[1515312000000,2148],[1515916800000,2252],[1516521600000,2260],[1517126400000,2343],[1517731200000,2404],[1518336000000,2390],[1518940800000,2299],[1519545600000,2273],[1520150400000,2364],[1520755200000,2337],[1521356400000,2326],[1521961200000,2446],[1522566000000,2358],[1523170800000,2420],[1523775600000,2341],[1524380400000,2578],[1524985200000,2608],[1525590000000,2616],[1526194800000,2562],[1526799600000,2507],[1527404400000,2504],[1528009200000,2519],[1528614000000,2632],[1529218800000,2629],[1529823600000,2503],[1530428400000,2433],[1531033200000,2440],[1531638000000,2449],[1532242800000,2388]];
      var tripsPerBikePerWeek = [[1498374000000,4.788785046728972],[1498978800000,8.959484346224677],[1499583600000,9.043586550435865],[1500188400000,7.5348278622898315],[1500793200000,7.574498567335244],[1501398000000,7.472072072072072],[1502002800000,8.002287021154945],[1502607600000,8.9559244419004],[1503212400000,9.245910885504793],[1503817200000,9.106451612903227],[1504422000000,9.4227078891258],[1505026800000,8.951385512882839],[1505631600000,9.30981308411215],[1506236400000,9.232876712328768],[1506841200000,9.762552792116377],[1507446000000,8.993133889161353],[1508050800000,9.455802469135802],[1508655600000,10.259671179883945],[1509260400000,9.46448087431694],[1509865200000,10.06095717884131],[1510473600000,8.661786976274609],[1511078400000,7.213054830287207],[1511683200000,8.885576923076924],[1512288000000,9.377118644067796],[1512892800000,8.989046097672295],[1513497600000,7.056533827618165],[1514102400000,4.240041386445939],[1514707200000,6.059574468085106],[1515312000000,6.954841713221602],[1515916800000,7.451154529307282],[1516521600000,7.991592920353982],[1517126400000,9.268459240290227],[1517731200000,9.641014975041598],[1518336000000,9.046861924686192],[1518940800000,7.526750761200522],[1519545600000,7.1913770347558295],[1520150400000,8.971235194585448],[1520755200000,7.423620025673941],[1521356400000,8.04213241616509],[1521961200000,9.712591986917417],[1522566000000,8.608566581849024],[1523170800000,9.597107438016529],[1523775600000,9.375053395984622],[1524380400000,10.548875096974399],[1524985200000,11.534509202453988],[1525590000000,12.220948012232416],[1526194800000,12.161982825917253],[1526799600000,12.158356601515756],[1527404400000,12.22164536741214],[1528009200000,13.331083763398174],[1528614000000,12.763297872340425],[1529218800000,12.898060098896918],[1529823600000,14.083499800239712],[1530428400000,11.654747225647348],[1531033200000,14.269262295081967],[1531638000000,14.01143323805635],[1532242800000,14.296482412060302]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);
      
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
