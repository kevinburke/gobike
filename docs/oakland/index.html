<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link " href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/berkeley/">Berkeley</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/emeryville/">Emeryville</span></a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 6278
          <div id="placeholder" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 79
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 961
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 6.5
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1499583600000,798],[1500188400000,1288],[1500793200000,1947],[1501398000000,2684],[1502002800000,2667],[1502607600000,2694],[1503212400000,2919],[1503817200000,2801],[1504422000000,2959],[1505026800000,3286],[1505631600000,3423],[1506236400000,3577],[1506841200000,3626],[1507446000000,3198],[1508050800000,3407],[1508655600000,3720],[1509260400000,3333],[1509865200000,3437],[1510473600000,3063],[1511078400000,2542],[1511683200000,3164],[1512288000000,3497],[1512892800000,3317],[1513497600000,2812],[1514102400000,1644],[1514707200000,2344],[1515312000000,2780],[1515916800000,3285],[1516521600000,3294],[1517126400000,3895],[1517731200000,4082],[1518336000000,3894],[1518940800000,3141],[1519545600000,3037],[1520150400000,3733],[1520755200000,3184],[1521356400000,3417],[1521961200000,4558],[1522566000000,3839],[1523170800000,4583],[1523775600000,4380],[1524380400000,4697],[1524985200000,5054],[1525590000000,5714],[1526194800000,5966],[1526799600000,5546],[1527404400000,5909],[1528009200000,6368],[1528614000000,6469],[1529218800000,6212],[1529823600000,6488],[1530428400000,5378],[1531033200000,6395],[1531638000000,6594],[1532242800000,6278]];
      var stationsPerWeek = [[1499583600000,34],[1500188400000,39],[1500793200000,50],[1501398000000,53],[1502002800000,54],[1502607600000,56],[1503212400000,54],[1503817200000,56],[1504422000000,60],[1505026800000,64],[1505631600000,65],[1506236400000,66],[1506841200000,67],[1507446000000,65],[1508050800000,67],[1508655600000,68],[1509260400000,65],[1509865200000,66],[1510473600000,66],[1511078400000,68],[1511683200000,67],[1512288000000,66],[1512892800000,69],[1513497600000,71],[1514102400000,70],[1514707200000,72],[1515312000000,73],[1515916800000,74],[1516521600000,74],[1517126400000,75],[1517731200000,75],[1518336000000,75],[1518940800000,74],[1519545600000,75],[1520150400000,75],[1520755200000,76],[1521356400000,77],[1521961200000,79],[1522566000000,78],[1523170800000,79],[1523775600000,79],[1524380400000,79],[1524985200000,79],[1525590000000,79],[1526194800000,78],[1526799600000,79],[1527404400000,79],[1528009200000,79],[1528614000000,79],[1529218800000,79],[1529823600000,79],[1530428400000,78],[1531033200000,79],[1531638000000,79],[1532242800000,79]];
      var bikesPerWeek = [[1499583600000,319],[1500188400000,437],[1500793200000,481],[1501398000000,609],[1502002800000,605],[1502607600000,612],[1503212400000,646],[1503817200000,676],[1504422000000,698],[1505026800000,705],[1505631600000,694],[1506236400000,708],[1506841200000,701],[1507446000000,652],[1508050800000,667],[1508655600000,683],[1509260400000,625],[1509865200000,596],[1510473600000,581],[1511078400000,593],[1511683200000,657],[1512288000000,723],[1512892800000,739],[1513497600000,714],[1514102400000,578],[1514707200000,668],[1515312000000,720],[1515916800000,790],[1516521600000,774],[1517126400000,833],[1517731200000,829],[1518336000000,854],[1518940800000,779],[1519545600000,743],[1520150400000,850],[1520755200000,779],[1521356400000,797],[1521961200000,910],[1522566000000,834],[1523170800000,878],[1523775600000,843],[1524380400000,852],[1524985200000,902],[1525590000000,947],[1526194800000,933],[1526799600000,915],[1527404400000,922],[1528009200000,957],[1528614000000,983],[1529218800000,966],[1529823600000,982],[1530428400000,930],[1531033200000,971],[1531638000000,976],[1532242800000,961]];
      var tripsPerBikePerWeek = [[1499583600000,2.501567398119122],[1500188400000,2.9473684210526314],[1500793200000,4.047817047817047],[1501398000000,4.407224958949097],[1502002800000,4.4082644628099175],[1502607600000,4.401960784313726],[1503212400000,4.518575851393189],[1503817200000,4.143491124260355],[1504422000000,4.239255014326647],[1505026800000,4.660992907801418],[1505631600000,4.932276657060519],[1506236400000,5.05225988700565],[1506841200000,5.172610556348074],[1507446000000,4.904907975460123],[1508050800000,5.1079460269865065],[1508655600000,5.446559297218156],[1509260400000,5.3328],[1509865200000,5.766778523489933],[1510473600000,5.271944922547332],[1511078400000,4.286677908937605],[1511683200000,4.815829528158296],[1512288000000,4.836791147994467],[1512892800000,4.488497970230041],[1513497600000,3.9383753501400562],[1514102400000,2.8442906574394464],[1514707200000,3.5089820359281436],[1515312000000,3.861111111111111],[1515916800000,4.158227848101266],[1516521600000,4.255813953488372],[1517126400000,4.675870348139256],[1517731200000,4.924004825090471],[1518336000000,4.5597189695550355],[1518940800000,4.03209242618742],[1519545600000,4.087483176312247],[1520150400000,4.391764705882353],[1520755200000,4.087291399229782],[1521356400000,4.28732747804266],[1521961200000,5.008791208791209],[1522566000000,4.603117505995204],[1523170800000,5.219817767653758],[1523775600000,5.195729537366548],[1524380400000,5.512910798122066],[1524985200000,5.603104212860311],[1525590000000,6.033790918690602],[1526194800000,6.394426580921758],[1526799600000,6.06120218579235],[1527404400000,6.408893709327549],[1528009200000,6.654127481713688],[1528614000000,6.58087487283825],[1529218800000,6.430641821946169],[1529823600000,6.606924643584521],[1530428400000,5.7827956989247316],[1531033200000,6.585993820803296],[1531638000000,6.756147540983607],[1532242800000,6.532778355879293]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);
      
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
