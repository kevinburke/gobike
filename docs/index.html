<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link active" href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/berkeley/">Berkeley</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/emeryville/">Emeryville</span></a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 47037
          <div id="placeholder" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 303
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 2726
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 17.3
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1498374000000,3164],[1498978800000,5846],[1499583600000,9247],[1500188400000,11924],[1500793200000,13163],[1501398000000,15274],[1502002800000,16957],[1502607600000,18752],[1503212400000,19947],[1503817200000,20910],[1504422000000,21741],[1505026800000,22878],[1505631600000,24601],[1506236400000,24208],[1506841200000,25691],[1507446000000,22763],[1508050800000,24020],[1508655600000,26646],[1509260400000,24138],[1509865200000,25215],[1510473600000,21684],[1511078400000,17169],[1511683200000,23446],[1512288000000,25131],[1512892800000,24830],[1513497600000,19024],[1514102400000,9921],[1514707200000,16187],[1515312000000,19205],[1515916800000,21642],[1516521600000,23327],[1517126400000,28035],[1517731200000,30005],[1518336000000,28097],[1518940800000,22394],[1519545600000,21213],[1520150400000,27329],[1520755200000,22328],[1521356400000,24135],[1521961200000,30415],[1522566000000,26413],[1523170800000,30655],[1523775600000,29075],[1524380400000,35678],[1524985200000,39110],[1525590000000,41537],[1526194800000,40284],[1526799600000,39388],[1527404400000,40076],[1528009200000,44755],[1528614000000,45328],[1529218800000,45949],[1529823600000,48014],[1530428400000,38480],[1531033200000,47986],[1531638000000,47562],[1532242800000,47037]];
      var stationsPerWeek = [[1498374000000,41],[1498978800000,41],[1499583600000,94],[1500188400000,130],[1500793200000,150],[1501398000000,169],[1502002800000,187],[1502607600000,203],[1503212400000,200],[1503817200000,209],[1504422000000,214],[1505026800000,221],[1505631600000,228],[1506236400000,233],[1506841200000,235],[1507446000000,237],[1508050800000,241],[1508655600000,245],[1509260400000,242],[1509865200000,246],[1510473600000,249],[1511078400000,252],[1511683200000,251],[1512288000000,253],[1512892800000,257],[1513497600000,263],[1514102400000,265],[1514707200000,265],[1515312000000,267],[1515916800000,268],[1516521600000,268],[1517126400000,270],[1517731200000,273],[1518336000000,272],[1518940800000,272],[1519545600000,274],[1520150400000,278],[1520755200000,282],[1521356400000,284],[1521961200000,285],[1522566000000,286],[1523170800000,289],[1523775600000,289],[1524380400000,289],[1524985200000,289],[1525590000000,289],[1526194800000,288],[1526799600000,289],[1527404400000,291],[1528009200000,293],[1528614000000,296],[1529218800000,298],[1529823600000,300],[1530428400000,299],[1531033200000,301],[1531638000000,302],[1532242800000,303]];
      var bikesPerWeek = [[1498374000000,538],[1498978800000,546],[1499583600000,943],[1500188400000,1421],[1500793200000,1548],[1501398000000,1804],[1502002800000,1916],[1502607600000,1919],[1503212400000,1967],[1503817200000,2062],[1504422000000,2120],[1505026800000,2259],[1505631600000,2344],[1506236400000,2327],[1506841200000,2301],[1507446000000,2223],[1508050800000,2228],[1508655600000,2279],[1509260400000,2221],[1509865200000,2212],[1510473600000,2187],[1511078400000,2209],[1511683200000,2365],[1512288000000,2463],[1512892800000,2526],[1513497600000,2500],[1514102400000,2278],[1514707200000,2504],[1515312000000,2542],[1515916800000,2660],[1516521600000,2650],[1517126400000,2758],[1517731200000,2795],[1518336000000,2807],[1518940800000,2708],[1519545600000,2708],[1520150400000,2788],[1520755200000,2796],[1521356400000,2806],[1521961200000,2886],[1522566000000,2838],[1523170800000,2858],[1523775600000,2763],[1524380400000,3005],[1524985200000,3048],[1525590000000,3008],[1526194800000,2954],[1526799600000,2881],[1527404400000,2865],[1528009200000,2875],[1528614000000,2951],[1529218800000,2958],[1529823600000,2859],[1530428400000,2811],[1531033200000,2795],[1531638000000,2775],[1532242800000,2726]];
      var tripsPerBikePerWeek = [[1498374000000,5.881040892193308],[1498978800000,10.706959706959706],[1499583600000,9.80593849416755],[1500188400000,8.391273750879662],[1500793200000,8.503229974160206],[1501398000000,8.466740576496674],[1502002800000,8.850208768267223],[1502607600000,9.771756122980719],[1503212400000,10.140823589222165],[1503817200000,10.140640155189137],[1504422000000,10.255188679245283],[1505026800000,10.127490039840637],[1505631600000,10.495307167235495],[1506236400000,10.403094112591319],[1506841200000,11.165145588874402],[1507446000000,10.239766081871345],[1508050800000,10.780969479353681],[1508655600000,11.69197016235191],[1509260400000,10.868077442593426],[1509865200000,11.399186256781194],[1510473600000,9.914951989026063],[1511078400000,7.772295156179267],[1511683200000,9.913742071881607],[1512288000000,10.20341047503045],[1512892800000,9.829770387965162],[1513497600000,7.6096],[1514102400000,4.35513608428446],[1514707200000,6.4644568690095845],[1515312000000,7.55507474429583],[1515916800000,8.13609022556391],[1516521600000,8.802641509433963],[1517126400000,10.16497461928934],[1517731200000,10.735241502683364],[1518336000000,10.009618810117564],[1518940800000,8.269571639586411],[1519545600000,7.833456425406204],[1520150400000,9.802367288378766],[1520755200000,7.985693848354792],[1521356400000,8.60121168923735],[1521961200000,10.538808038808039],[1522566000000,9.306906272022552],[1523170800000,10.726032190342897],[1523775600000,10.522982265653276],[1524380400000,11.87287853577371],[1524985200000,12.831364829396325],[1525590000000,13.808843085106384],[1526194800000,13.637102234258633],[1526799600000,13.671641791044776],[1527404400000,13.988132635253054],[1528009200000,15.566956521739131],[1528614000000,15.360216875635377],[1529218800000,15.533806626098716],[1529823600000,16.793983910458202],[1530428400000,13.689078619708289],[1531033200000,17.168515205724507],[1531638000000,17.13945945945946],[1532242800000,17.254952311078505]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);
      
      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
