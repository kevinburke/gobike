<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GoBike Status</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8">
          <h1 class="display-4">Ford GoBike Metrics</h1>
          <ul class="nav nav-pills flex-column flex-sm-row">
            <li class="nav-item">
              <a class="nav-link " href="/">Bay Area</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/oakland/">Oakland</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sf/">San Francisco</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/sj/">San Jose</a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="/berkeley/">Berkeley</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/emeryville/">Emeryville</span></a>
            </li>
          </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per week: 407
          <div id="placeholder" class="chart">
          </div>
        </div>
        <div class="col-md-4">
          <h4>Most Popular Stations</h4>
          <ul>
            <li>65th St at Hollis St (80)</li>
            <li>Adeline St at 40th St (64)</li>
            <li>Emeryville Public Market (57)</li>
            <li>Stanford Ave at Hollis St (47)</li>
            <li>Horton St at 40th St (47)</li>
            <li>Emeryville Town Hall (42)</li>
            <li>59th St at Horton St (41)</li>
            <li>Doyle St at 59th St (38)</li>
            <li>47th St at San Pablo Ave (27)</li>
            <li>53rd St at Hollis St (22)</li>
            </ul>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Number of stations, last week: 10
          <div id="placeholder-2" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Bikes ridden last week: 261
          <div id="placeholder-3" class="chart">
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-8">
          Trips per bike per week: 1.6
          <div id="placeholder-4" class="chart">
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="/static/jquery.min.js"></script>
    <script type="text/javascript" src="/static/flot.min.js"></script>
    <script type="text/javascript" src="/static/flot.time.min.js"></script>
    <script>
      var plotOptions = {
        xaxis: { mode: "time" },
        legend: {position: "nw"},
        grid: {
          hoverable: true,
          borderWidth: 0,
        },
      };
      var color = '#002267';
      var tripsPerWeek = [[1499583600000,47],[1500188400000,57],[1500793200000,81],[1501398000000,110],[1502002800000,79],[1502607600000,58],[1503212400000,51],[1503817200000,110],[1504422000000,137],[1505026800000,165],[1505631600000,181],[1506236400000,167],[1506841200000,232],[1507446000000,148],[1508050800000,163],[1508655600000,220],[1509260400000,181],[1509865200000,184],[1510473600000,191],[1511078400000,182],[1511683200000,180],[1512288000000,193],[1512892800000,192],[1513497600000,150],[1514102400000,107],[1514707200000,143],[1515312000000,149],[1515916800000,185],[1516521600000,172],[1517126400000,215],[1517731200000,219],[1518336000000,227],[1518940800000,155],[1519545600000,146],[1520150400000,213],[1520755200000,160],[1521356400000,205],[1521961200000,329],[1522566000000,231],[1523170800000,301],[1523775600000,268],[1524380400000,255],[1524985200000,298],[1525590000000,340],[1526194800000,314],[1526799600000,258],[1527404400000,387],[1528009200000,365],[1528614000000,433],[1529218800000,381],[1529823600000,444],[1530428400000,350],[1531033200000,433],[1531638000000,464],[1532242800000,407]];
      var stationsPerWeek = [[1499583600000,3],[1500188400000,3],[1500793200000,3],[1501398000000,3],[1502002800000,3],[1502607600000,3],[1503212400000,3],[1503817200000,6],[1504422000000,6],[1505026800000,7],[1505631600000,7],[1506236400000,7],[1506841200000,8],[1507446000000,8],[1508050800000,8],[1508655600000,9],[1509260400000,9],[1509865200000,9],[1510473600000,9],[1511078400000,9],[1511683200000,9],[1512288000000,9],[1512892800000,9],[1513497600000,9],[1514102400000,9],[1514707200000,9],[1515312000000,9],[1515916800000,9],[1516521600000,9],[1517126400000,9],[1517731200000,9],[1518336000000,9],[1518940800000,9],[1519545600000,9],[1520150400000,9],[1520755200000,10],[1521356400000,10],[1521961200000,10],[1522566000000,10],[1523170800000,10],[1523775600000,10],[1524380400000,10],[1524985200000,10],[1525590000000,10],[1526194800000,10],[1526799600000,10],[1527404400000,10],[1528009200000,10],[1528614000000,10],[1529218800000,10],[1529823600000,10],[1530428400000,10],[1531033200000,10],[1531638000000,10],[1532242800000,10]];
      var bikesPerWeek = [[1499583600000,40],[1500188400000,46],[1500793200000,61],[1501398000000,80],[1502002800000,58],[1502607600000,49],[1503212400000,46],[1503817200000,83],[1504422000000,102],[1505026800000,121],[1505631600000,125],[1506236400000,115],[1506841200000,149],[1507446000000,106],[1508050800000,125],[1508655600000,140],[1509260400000,133],[1509865200000,133],[1510473600000,122],[1511078400000,123],[1511683200000,117],[1512288000000,136],[1512892800000,136],[1513497600000,108],[1514102400000,74],[1514707200000,111],[1515312000000,109],[1515916800000,132],[1516521600000,124],[1517126400000,159],[1517731200000,157],[1518336000000,162],[1518940800000,119],[1519545600000,107],[1520150400000,141],[1520755200000,126],[1521356400000,152],[1521961200000,212],[1522566000000,162],[1523170800000,201],[1523775600000,186],[1524380400000,176],[1524985200000,207],[1525590000000,215],[1526194800000,210],[1526799600000,176],[1527404400000,241],[1528009200000,246],[1528614000000,284],[1529218800000,249],[1529823600000,287],[1530428400000,218],[1531033200000,276],[1531638000000,285],[1532242800000,261]];
      var tripsPerBikePerWeek = [[1499583600000,1.175],[1500188400000,1.2391304347826086],[1500793200000,1.3278688524590163],[1501398000000,1.375],[1502002800000,1.3620689655172413],[1502607600000,1.183673469387755],[1503212400000,1.108695652173913],[1503817200000,1.3253012048192772],[1504422000000,1.3431372549019607],[1505026800000,1.3636363636363635],[1505631600000,1.448],[1506236400000,1.4521739130434783],[1506841200000,1.5570469798657718],[1507446000000,1.3962264150943395],[1508050800000,1.304],[1508655600000,1.5714285714285714],[1509260400000,1.3609022556390977],[1509865200000,1.3834586466165413],[1510473600000,1.5655737704918034],[1511078400000,1.4796747967479675],[1511683200000,1.5384615384615385],[1512288000000,1.4191176470588236],[1512892800000,1.411764705882353],[1513497600000,1.3888888888888888],[1514102400000,1.445945945945946],[1514707200000,1.2882882882882882],[1515312000000,1.3669724770642202],[1515916800000,1.4015151515151516],[1516521600000,1.3870967741935485],[1517126400000,1.3522012578616351],[1517731200000,1.394904458598726],[1518336000000,1.4012345679012346],[1518940800000,1.3025210084033614],[1519545600000,1.3644859813084111],[1520150400000,1.5106382978723405],[1520755200000,1.2698412698412698],[1521356400000,1.3486842105263157],[1521961200000,1.5518867924528301],[1522566000000,1.4259259259259258],[1523170800000,1.4975124378109452],[1523775600000,1.4408602150537635],[1524380400000,1.4488636363636365],[1524985200000,1.4396135265700483],[1525590000000,1.5813953488372092],[1526194800000,1.4952380952380953],[1526799600000,1.4659090909090908],[1527404400000,1.6058091286307055],[1528009200000,1.483739837398374],[1528614000000,1.5246478873239437],[1529218800000,1.5301204819277108],[1529823600000,1.5470383275261324],[1530428400000,1.6055045871559632],[1531033200000,1.568840579710145],[1531638000000,1.6280701754385964],[1532242800000,1.5593869731800767]];
      var plotTooltip = function(event, pos, item) {
        if (item) {
          var x = item.datapoint[0].toFixed(0);
          var y = item.datapoint[1].toFixed(0);
          $("#tooltip").html(y + " " + item.series.label).css({top: item.pageY+5, left: item.pageX+5}).show();
        } else {
          $("#tooltip").hide();
        }
      };
      $.plot("#placeholder", [{color: color, data: tripsPerWeek, label: "trips"}], plotOptions);

      $("<div id='tooltip'></div>").css({
        position: "absolute",
        display: "none",
        border: "1px solid #fdd",
        padding: "2px",
        "background-color": "#fee",
        opacity: 0.80,
      }).appendTo("body");
      $("#placeholder").bind("plothover", plotTooltip);
      $.plot("#placeholder-2", [{color: color, data: stationsPerWeek, label: "stations"}], plotOptions);
      $("#placeholder-2").bind("plothover", plotTooltip);
      $.plot("#placeholder-3", [{color: color, data: bikesPerWeek, label: "bikes"}], plotOptions);
      $("#placeholder-3").bind("plothover", plotTooltip);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $.plot("#placeholder-4", [{color: color, data: tripsPerBikePerWeek, label: "trips/bike"}], plotOptions);
      $("#placeholder-4").bind("plothover", plotTooltip);
    </script>
  </body>
</html>
